import { useState, useEffect } from "react";
import { motion } from "framer-motion";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import useSound from 'use-sound';

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª Ù…Ù† Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø¹Ø§Ù…
const correctSoundUrl = '/sounds/correct.mp3';
const wrongSoundUrl = '/sounds/wrong.mp3';
const backgroundMusicUrl = '/sounds/background.mp3';

// Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù„Ø¹Ø¨Ø©
const questions = [
  { question: "Ù…Ø§ Ù‡Ùˆ Ø£ÙƒØ¨Ø± ÙƒÙˆÙƒØ¨ ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ", options: ["Ø§Ù„Ù…Ø±ÙŠØ®", "Ø§Ù„Ø²Ù‡Ø±Ø©", "Ø§Ù„Ù…Ø´ØªØ±ÙŠ", "Ù†Ø¨ØªÙˆÙ†"], answer: "Ø§Ù„Ù…Ø´ØªØ±ÙŠ" },
  { question: "Ù…Ø§ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ±Ù…Ø² Ù„Ù‡ Ø¨Ù€ OØŸ", options: ["Ø£ÙƒØ³Ø¬ÙŠÙ†", "Ø°Ù‡Ø¨", "ÙØ¶Ø©", "Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†"], answer: "Ø£ÙƒØ³Ø¬ÙŠÙ†" },
  { question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ù„ÙˆØ§Ù† Ù‚ÙˆØ³ Ù‚Ø²Ø­ØŸ", options: ["5", "6", "7", "8"], answer: "7" },
  { question: "Ù…Ø§ Ù‡ÙŠ Ø£ÙˆÙ„ Ø³ÙˆØ±Ø© Ù†Ø²Ù„Øª ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…ØŸ", options: ["Ø§Ù„Ø¹Ù„Ù‚", "Ø§Ù„ÙØ§ØªØ­Ø©", "Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", "Ø§Ù„Ù†Ø§Ø³"], answer: "Ø§Ù„Ø¹Ù„Ù‚" },
  { question: "Ù…Ù† Ù‡Ùˆ Ù‡Ø¯Ø§Ù ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… 2018ØŸ", options: ["Ù…ÙŠØ³ÙŠ", "Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ", "Ù‡Ø§Ø±ÙŠ ÙƒÙŠÙ†", "Ù†ÙŠÙ…Ø§Ø±"], answer: "Ù‡Ø§Ø±ÙŠ ÙƒÙŠÙ†" },
  { question: "Ù…ØªÙ‰ ÙˆÙ‚Ø¹Øª Ø§Ù„Ø­Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŸ", options: ["1914-1918", "1939-1945", "1950-1953", "1960-1965"], answer: "1939-1945" },
  { question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ø°ÙŠ ÙŠÙÙ„Ù‚Ø¨ Ø¨Ù…Ù„Ùƒ Ø§Ù„ØºØ§Ø¨Ø©ØŸ", options: ["Ø§Ù„Ù†Ù…Ø±", "Ø§Ù„Ø£Ø³Ø¯", "Ø§Ù„ÙÙ‡Ø¯", "Ø§Ù„Ø¯Ø¨"], answer: "Ø§Ù„Ø£Ø³Ø¯" },
  { question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ", options: ["3", "4", "5", "6"], answer: "5" },
  { question: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø¹Ù„Ù… Ø§Ù„Ø¬Ø¨Ø±ØŸ", options: ["Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„Ø±Ø§Ø²ÙŠ", "Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠ", "Ø§Ø¨Ù† Ø³ÙŠÙ†Ø§", "Ø§Ù„ÙƒÙ†Ø¯ÙŠ"], answer: "Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠ" },
  { question: "Ø£ÙŠ Ø¯ÙˆÙ„Ø© ÙØ§Ø²Øª Ø¨ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… 2014ØŸ", options: ["Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†", "Ø£Ù„Ù…Ø§Ù†ÙŠØ§", "Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„", "ÙØ±Ù†Ø³Ø§"], answer: "Ø£Ù„Ù…Ø§Ù†ÙŠØ§" },
  { question: "Ù…Ø§ Ù‡Ùˆ Ø£Ø·ÙˆÙ„ Ù†Ù‡Ø± ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†", "Ø§Ù„Ù†ÙŠÙ„", "Ø§Ù„Ù…ÙŠÙƒÙˆÙ†Øº", "Ø§Ù„Ø¯Ø§Ù†ÙˆØ¨"], answer: "Ø§Ù„Ù†ÙŠÙ„" },
  { question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["5", "6", "7", "8"], answer: "7" },
  { question: "Ù…Ù† Ù‡Ùˆ Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ù…ØµØ¨Ø§Ø­ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØŸ", options: ["Ø£Ù„ÙƒØ³Ù†Ø¯Ø± Ø¬Ø±Ø§Ù‡Ø§Ù… Ø¨ÙŠÙ„", "ØªÙˆÙ…Ø§Ø³ Ø¥Ø¯ÙŠØ³ÙˆÙ†", "Ù†ÙŠÙƒÙˆÙ„Ø§ ØªØ³Ù„Ø§", "Ø¬ÙŠÙ…Ø³ ÙˆØ§Øª"], answer: "ØªÙˆÙ…Ø§Ø³ Ø¥Ø¯ÙŠØ³ÙˆÙ†" },
  { question: "Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ© ÙÙŠ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ØŸ", options: ["Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±", "Ø§Ù„ÙŠÙ†", "Ø§Ù„ÙŠÙˆØ±Ùˆ", "Ø§Ù„ÙŠÙˆØ§Ù†"], answer: "Ø§Ù„ÙŠÙ†" },
  { question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø§Ù„Ø°ÙŠ ØªØ­ØªØ§Ø¬Ù‡ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¶ÙˆØ¦ÙŠØŸ", options: ["Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†", "Ø«Ø§Ù†ÙŠ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†", "Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†", "Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†"], answer: "Ø«Ø§Ù†ÙŠ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†" },
  { question: "ÙÙŠ Ø£ÙŠ Ø³Ù†Ø© ØªÙ… Ø§ÙØªØªØ§Ø­ Ù‚Ù†Ø§Ø© Ø§Ù„Ø³ÙˆÙŠØ³ØŸ", options: ["1869", "1901", "1945", "1956"], answer: "1869" },
  { question: "Ù…Ù† Ù‡Ùˆ Ø£ÙˆÙ„ Ø®Ù„ÙŠÙØ© ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ", options: ["Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø¹Ø«Ù…Ø§Ù† Ø¨Ù† Ø¹ÙØ§Ù†", "Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚", "Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨"], answer: "Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚" },
  { question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°Ø±ÙŠ Ù„Ø¹Ù†ØµØ± Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†ØŸ", options: ["4", "6", "8", "12"], answer: "6" },
  { question: "Ù…Ø§ Ø§Ø³Ù… Ø£ÙƒØ¨Ø± Ù…Ø­ÙŠØ· ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ØŸ", options: ["Ø§Ù„Ø£Ø·Ù„Ø³ÙŠ", "Ø§Ù„Ù‡Ù†Ø¯ÙŠ", "Ø§Ù„Ù‡Ø§Ø¯ÙŠ", "Ø§Ù„Ù…ØªØ¬Ù…Ø¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠ"], answer: "Ø§Ù„Ù‡Ø§Ø¯ÙŠ" },
  { question: "ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø³Ù†Ø§Ù† Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ø§Ù„Ø¨Ø§Ù„ØºØŸ", options: ["28", "30", "32", "36"], answer: "32" }
];

export default function QuizGame() {
  const [currentQuestion, setCurrentQuestion] = useState(0);
  const [feedback, setFeedback] = useState(null);
  const [playCorrect] = useSound(correctSoundUrl);
  const [playWrong] = useSound(wrongSoundUrl);
  const [playBackground, { stop }] = useSound(backgroundMusicUrl, { volume: 0.5, loop: true });

  useEffect(() => {
    playBackground();
    return () => stop();
  }, [playBackground, stop]);

  const handleAnswer = (option) => {
    if (option === questions[currentQuestion].answer) {
      playCorrect();
      setFeedback("âœ… Ø¥Ø¬Ø§Ø¨ØªÙƒ ØµØ­ÙŠØ­Ø©!");
    } else {
      playWrong();
      setFeedback("âŒ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ø®Ø§Ø·Ø¦Ø©!");
    }
    setTimeout(() => {
      setFeedback(null);
      setCurrentQuestion(currentQuestion + 1);
    }, 1000);
  };

  return (
    <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white p-5">
      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 1 }}>
        <h1 className="text-4xl font-extrabold mb-6 bg-black p-3 rounded-xl shadow-lg">ðŸ”¥ ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© ðŸ”¥</h1>
      </motion.div>
      {currentQuestion < questions.length ? (
        <Card className="p-6 w-96 bg-white text-black shadow-2xl">
          <CardContent>
            <h2 className="text-2xl font-bold mb-4">{questions[currentQuestion].question}</h2>
            <div className="grid grid-cols-2 gap-4">
              {questions[currentQuestion].options.map((option, index) => (
                <Button key={index} onClick={() => handleAnswer(option)}>{option}</Button>
              ))}
            </div>
            {feedback && (
              <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 0.5 }} className="mt-4 text-lg font-semibold">
                {feedback}
              </motion.p>
            )}
          </CardContent>
        </Card>
      ) : (
        <div className="text-center p-5 bg-black/70 rounded-lg">
          <h2 className="text-3xl mb-4">ðŸŽ‰ Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©! ðŸŽ‰</h2>
          <Button onClick={() => setCurrentQuestion(0)}>Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</Button>
        </div>
      )}
      <footer className="mt-10 text-center text-sm text-gray-200">
        <p>ØªÙ… ØªØµÙ…ÙŠÙ… Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Mizo Helmy</p>
        <p>Ù„Ù„ØªÙˆØ§ØµÙ„: moaazmahmoud.756@gmail.com</p>
      </footer>
    </div>
  );
}
